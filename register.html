<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Create Account â€” SnovaEdu</title>

<!-- icons -->
<link rel="icon" href="/assets/icons/favicon.ico">

<!-- main styles -->
<link rel="stylesheet" href="/assets/css/main.css">

<!-- scripts -->
<script src="/assets/js/menu.js" defer></script>
<script src="/assets/js/toast.js" defer></script>
<script src="/assets/js/lang.js" defer></script>
<script src="/assets/js/access.js" defer></script>
<script src="/assets/js/auth-nav.js" defer></script>

<style>
/* =========================
   Page Background
========================= */
body.register-page {
  font-family: Inter, Arial, sans-serif;
  margin: 0;
}

/* =========================
   Layout
========================= */
.register-wrap {
  max-width: 520px;
  margin: 120px auto 80px;
  padding: 0 20px;
  padding-bottom: 64px;
}


.register-title {
  text-align: center;
  margin-bottom: 26px;
}

.register-title h1 {
  font-size: 34px;
  font-weight: 400;
  color: var(--brand-2);
  margin-bottom: 8px;
}

.register-title p {
  font-size: 16px;
  color: #555;
}

/* =========================
   Card
========================= */
.register-card {
  border-radius: 16px;
  padding: 30px;
  box-shadow: 0 10px 28px rgba(9,30,66,0.06);
  border: 1px solid rgba(10,10,10,0.04);
}

/* =========================
   Form
========================= */
.register-form {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.register-form label {
  font-size: 14px;
  color: #333;
}

.register-form input {
  padding: 11px 12px;
  border-radius: 8px;
  border: 1px solid #e2e2e2;
  font-size: 14px;
}

.register-form input:focus {
  outline: none;
  border-color: #3B82F6;
}

.form-note {
  font-size: 13px;
  color: #666;
  margin-top: 6px;
}


.password-hint {
  background-color: #fefcf5; /* æµ…é»„è‰²åº•è‰² */
  border-left: 4px solid #f4c430; /* é»„è‰²ä¾§è¾¹æ¡ï¼Œå¼ºè°ƒ */
  padding: 12px 16px;
  margin-bottom: 16px;
  border-radius: 8px;
  font-family: Inter, Arial, sans-serif;
}

.password-hint .hint-title {
  font-weight: 600;
  font-size: 1rem;        /* æ¯”ä¹‹å‰å°ä¸€ç‚¹ */
  margin-bottom: 6px;
  color: #333;
}

.password-hint .hint-list li {
  font-size: 0.92rem;     /* æ­£æ–‡ç•¥å° */
  line-height: 1.55;
  color: #555;
}


.password-hint .hint-list {
  margin: 0;
  padding-left: 20px;
  list-style-type: disc;
}

/* =========================
   Password Eye Toggle
========================= */

.password-wrapper {
  position: relative;
}

.password-wrapper input {
  width: 100%;
  padding-right: 42px;
}

.toggle-password {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  font-size: 18px;
  opacity: 0.6;
  user-select: none;
}

.toggle-password:hover {
  opacity: 1;
}

/* =========================
   Password Rules UX
========================= */

.password-hint {
  margin: 12px 0 18px;
  font-size: 14px;
  color: #5a4a3b;
}

.password-hint strong {
  display: block;
  font-size: 15px;
  margin-bottom: 6px;
}

.password-hint ul {
  padding-left: 18px;
  margin: 0;
}

.password-hint li {
  margin: 4px 0;
}

.password-hint li.valid {
  color: #2e7d32;
}

.password-hint li.invalid {
  color: #b71c1c;
}

.password-wrapper {
  position: relative;
}

.password-wrapper input {
  width: 100%;
  padding-right: 46px;
}

.toggle-password {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  cursor: pointer;
  font-size: 18px;
  opacity: 0.65;
  z-index: 10;               /* ğŸ”´ éå¸¸å…³é”® */
  pointer-events: auto;     /* ğŸ”´ éå¸¸å…³é”® */
}

.toggle-password:hover {
  opacity: 1;
}

.password-hint {
  margin-top: 6px;
  font-size: 13px;
  color: #555;
}

.password-hint .hint-title {
  font-weight: 600;
  font-size: 14px;
  margin-bottom: 4px;
}

.password-hint ul {
  padding-left: 0;
  margin: 0;
  list-style: none;
}

.password-hint li {
  display: flex;
  align-items: center;
  gap: 6px;
  margin: 2px 0;
}

.password-hint .icon {
  font-size: 13px;
  width: 14px;
}

/* çŠ¶æ€ */
.password-hint li.valid {
  color: #1a7f37;
}

.password-hint li.valid .icon {
  content: "âœ”";
}

.password-hint li.invalid {
  color: #c62828;
}

/* å¯†ç  / ç¡®è®¤å¯†ç  æç¤ºé€šç”¨æ ·å¼ */
.password-hint,
.confirm-hint {
  gap: 8px;              /* â­ å…³é”®ï¼šæ‹‰å¼€ icon ä¸æ–‡å­—è·ç¦» */
  margin-top: 6px;
  font-size: 13px;
}

/* icon ç¨å¾®ç‹¬ç«‹ä¸€äº› */
.password-hint .icon,
.confirm-hint .icon {
  min-width: 16px;       /* é˜²æ­¢æŒ¤å‹ */
}

/* =========================
   Submit Button
========================= */
.register-form .btn {
  margin-top: 12px;
  transition: transform .2s ease, box-shadow .2s ease;
}

.register-form .btn:hover {
  transform: scale(1.04);
  box-shadow: 0 8px 18px rgba(59,130,246,0.25);
}

/* =========================
   Status
========================= */
.form-status {
  font-size: 13px;
  margin-top: 8px;
}

.form-status.error {
  color: #c0392b;
}

.form-status.success {
  color: #2e7d32;
}

/* =========================
   Footer helper text
========================= */
.register-footer {
  text-align: center;
  margin-top: 18px;
  font-size: 14px;
}

.register-footer a {
  color: var(--brand-2);
  text-decoration: underline;
}

</style>
</head>

<body class="register-page">

<!-- NAV -->

<nav id="topNav" class="nav--transparent">
  <div class="nav-inner">

    <!-- Logo -->
    <div class="brand">
      <a href="/index.html#home" class="brand">
        <img src="/assets/img/superedu-logo.png" alt="Edunova" class="logo-img" />
        <span class="brand-text">Edunova</span>
      </a>
    </div>

    <!-- =========================
         Desktop Menu
    ========================== -->
    <div class="menu" id="menu">

      <!-- Home -->
      <a href="/index.html#home" data-en="Home" data-zh="é¦–é¡µ">Home</a>

      <!-- About -->
      <a href="/index.html#about" data-en="About" data-zh="å…³äºæˆ‘ä»¬">About</a>

    <!-- Programs Dropdown -->
<div class="nav-item dropdown">

  <span class="dropdown-toggle"
        role="button"
        aria-haspopup="true"
        tabindex="0"
        data-en="Programs â¬‡ï¸"
        data-zh="é¡¹ç›® â¬‡ï¸"> 
  </span> 

  <div class="dropdown-menu">
    <a href="/education.html"
       id="navEduCenter"
       data-en="EduCenter"
       data-zh="æ•™è‚²ä¸­å¿ƒ">
      EduCenter
    </a>

    <a href="/community.html"
       id="navEduCommunity"
       data-en="EduCommunity"
       data-zh="æ•™è‚²ç¤¾åŒº">
      EduCommunity
    </a>

    <a href="/forum.html"
       id="navForum"
       data-en="EduForum"
       data-zh="æ•™è‚²è®ºå›">
      EduForum 
    </a>

    <a href="/events.html" data-en="Events" data-zh="æ´»åŠ¨"> Events</a>
    
  </div>

</div>

      <!-- Services -->
      <a href="/index.html#services" data-en="Services" data-zh="æœåŠ¡">Services</a>

      <!-- Membership -->
     <a href="/membership.html" id="navMembership" data-en="Membership" data-zh="ä¼šå‘˜ä¸­å¿ƒ">Membership</a>

      <!-- Get Involved Dropdown -->
<div class="nav-item dropdown">
  <span class="dropdown-toggle" role="button" aria-haspopup="true" tabindex="0"
        data-en="Get Involved â¬‡ï¸" data-zh="å‚ä¸æ–¹å¼ â¬‡ï¸">
   
</span>

  <div class="dropdown-menu">
    <a href="/volunteer.html"
       data-en="Volunteer"
       data-zh="å¿—æ„¿è€…">
      Volunteer
    </a>

    <a href="/donation.html"
       data-en="Donation"
       data-zh="æèµ ">
      Donation
    </a>
    <a href="/scholarship.html"
       data-en="scholarship"
       data-zh="å¥–å­¦é‡‘">
      scholarship
    </a>

    <a href="/index.html#resources"
       data-en="Resources"
       data-zh="èµ„æº">
      Resources
    </a>
  </div>
</div>

      <!-- Contact -->
      <a href="/index.html#contact" data-en="Contact" data-zh="è”ç³»">Contact</a>

      <!-- Login -->
     <a href="/login.html" id="desktopAuth" data-en="Login" data-zh="ç™»å½•">Login</a>

      <!-- Slide underline -->
      <span class="nav-underline"></span>
    </div>

    <!-- Right side -->
    <div class="nav-right">
      <button id="langToggle" class="lang-toggle" aria-label="Language toggle">
        ä¸­æ–‡
      </button>

      <button id="hamburger" class="hamburger" aria-label="Menu">
        <span></span><span></span><span></span>
      </button>
    </div>
  </div>

  <!-- Mobile slide menu -->
  <div id="mobileMenu" class="mobile-menu" aria-hidden="true">
    <!-- Home -->
    <a href="/index.html#home" data-en="Home" data-zh="é¦–é¡µ">Home</a>

    <!-- About -->
    <a href="/index.html#about" data-en="About" data-zh="å…³äºæˆ‘ä»¬">About</a>

    <!-- Programs Accordion -->
    <details class="mobile-group">
      <summary data-en="Programs" data-zh="é¡¹ç›®">Programs</summary>
      <a href="/education.html" id="mobileEduCenter" data-en="EduCenter" data-zh="æ•™è‚²ä¸­å¿ƒ">EduCenter</a>
      <a href="/community.html" id="mobileEduCommunity" data-en="EduCommunity" data-zh="æ•™è‚²ç¤¾åŒº">EduCommunity</a>
      <a href="/forum.html" id="mobileForum" data-en="EduForum" data-zh="æ•™è‚²è®ºå›">EduForum</a>
      <a href="/events.html" data-en="Events" data-zh="æ´»åŠ¨">Events</a>
    </details>

    <!-- Service -->
    <a href="/index.html#services" data-en="Service" data-zh="æœåŠ¡">Service</a>

    <!-- Membership -->
    <a href="/membership.html" id="mobileMembership" data-en="Membership" data-zh="ä¼šå‘˜ä¸­å¿ƒ">Membership</a>

    <!-- Get Involved Accordion -->
    <details class="mobile-group">
      <summary data-en="Get Involved" data-zh="å‚ä¸æ–¹å¼">Get Involved</summary>
      <a href="/volunteer.html" data-en="Volunteer" data-zh="å¿—æ„¿è€…">Volunteer</a>
      <a href="/donation.html" data-en="Donation" data-zh="æèµ ">Donation</a>
      <a href="/scholarship.html"
       data-en="scholarship"
       data-zh="å¥–å­¦é‡‘">
      scholarship
    </a>
      <a href="/index.html#resources" data-en="Resources" data-zh="èµ„æº">Resources</a>
    </details>

    <!-- Contact -->
    <a href="/index.html#contact" data-en="Contact" data-zh="è”ç³»">Contact</a>

    <!-- Login -->
    <a href="/login.html" id="mobileAuth" data-en="Login" data-zh="ç™»å½•">Login</a>

    <!-- Mobile action buttons -->
    <div class="mobile-actions">
      <button class="btn btn-ghost" id="mobileRegister" data-en="Register/Join" data-zh="æ³¨å†Œ/åŠ å…¥">
        Register / Join
      </button>
      <button class="btn" id="mobileUnlock" data-en="Unlock Education" data-zh="è§£é”æ•™è‚²">
        Unlock Education
      </button>
    </div>
  </div>
</nav>

<!-- MAIN -->
<div class="register-wrap">

  <div class="register-title">
    <h1 data-en="Create Your Account" data-zh="åˆ›å»ºæ‚¨çš„è´¦æˆ·">
      Create Your Account
    </h1>
    <p
      data-en="Unlock full access to member-only resources and services."
      data-zh="è§£é”ä¼šå‘˜ä¸“å±èµ„æºä¸æœåŠ¡ã€‚"
    >
      Unlock full access to member-only resources and services.
    </p>
  </div>

  <div class="register-card">

    <form id="registerForm" class="register-form" novalidate autocomplete="off">

      <!-- First Name -->
      <label for="firstName" data-en="First Name*" data-zh="å*">First Name*</label>
      <input
        type="text"
        id="firstName"
        name="first_name"
        required
        placeholder="First name"
        data-en="First name"
        data-zh="åå­—"
      />

      <!-- Last Name -->
      <label for="lastName" data-en="Last Name*" data-zh="å§“*">Last Name*</label>
      <input
        type="text"
        id="lastName"
        name="last_name"
        required
        placeholder="Last name"
        data-en="Last name"
        data-zh="å§“æ°"
      />

      <!-- Email -->
      <label for="email" data-en="Email*" data-zh="é‚®ç®±*">Email*</label>
      <input
        type="email"
        id="email"
        name="email"
        required
        placeholder="Email address"
        data-en="Email address"
        data-zh="ç”µå­é‚®ç®±"
      />
      <div id="registerEmailStatus" class="field-hint"></div>

      <!-- Password -->
      <label for="password" data-en="Password*" data-zh="å¯†ç *">Password*</label>
      <div class="password-wrapper">
        <input
          type="password"
          id="password"
          name="password"
          required
          placeholder="Create a password"
          data-en="Create a password"
          data-zh="è®¾ç½®å¯†ç "
        />
        <button
          type="button"
          class="toggle-password"
          data-target="password"
          aria-label="Toggle password visibility"
        >
          ğŸ‘
        </button>
      </div>

      <!-- Password Rules -->
      <div class="password-hint">
        <div
          class="hint-title"
          data-en="Password requirements:"
          data-zh="å¯†ç è®¾ç½®è¦æ±‚ï¼š"
        >
          Password requirements:
        </div>

        <ul>
          <li id="rule-length">
            <span class="icon">âœ–</span>
            <span
              data-en="At least 8 characters"
              data-zh="è‡³å°‘ 8 ä½å­—ç¬¦"
            >
              At least 8 characters
            </span>
          </li>

          <li id="rule-letter">
            <span class="icon">âœ–</span>
            <span
              data-en="Include at least one letter (Aâ€“Z)"
              data-zh="è‡³å°‘åŒ…å« 1 ä¸ªè‹±æ–‡å­—æ¯"
            >
              Include at least one letter (Aâ€“Z)
            </span>
          </li>

          <li id="rule-number">
            <span class="icon">âœ–</span>
            <span
              data-en="Include at least one number (0â€“9)"
              data-zh="è‡³å°‘åŒ…å« 1 ä¸ªæ•°å­—"
            >
              Include at least one number (0â€“9)
            </span>
          </li>
        </ul>
      </div>

      <!-- Confirm Password -->
      <label
        for="confirmPassword"
        data-en="Confirm Password*"
        data-zh="ç¡®è®¤å¯†ç *"
      >
        Confirm Password*
      </label>
      <div class="password-wrapper">
        <input
          type="password"
          id="confirmPassword"
          required
          placeholder="Confirm your password"
          data-en="Confirm your password"
          data-zh="å†æ¬¡è¾“å…¥å¯†ç "
        />
        <button
          type="button"
          class="toggle-password"
          data-target="confirmPassword"
          aria-label="Toggle password visibility"
        >
          ğŸ‘
        </button>
      </div>

      <div id="confirmHint" class="password-hint" style="display:none;">
        <span class="icon">âŒ</span>
        <span
          class="text"
          data-en="Passwords do not match"
          data-zh="ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"
        >
          Passwords do not match
        </span>
      </div>

      <!-- Referral Code -->
      <label for="referral_code"
       data-en="Referral Code (optional)"
       data-zh="æ¨èç ï¼ˆå¯é€‰ï¼‰">
  Referral Code <span class="optional">(optional)</span>
</label>

<input
  type="text"
  id="referral_code"
  name="referral_code"
  placeholder="Enter referral code if you have one"
    data-en="Enter referral code if you have one"
    data-zh="å¦‚æœ‰æ¨èç è¯·è¾“å…¥"
  autocomplete="off"
/>

      <!-- Submit -->
      <button
        type="submit"
        class="btn btn-primary"
        data-en="Create Account"
        data-zh="åˆ›å»ºè´¦æˆ·"
      >
        Create Account
      </button>

      <div id="formStatus" class="form-status"></div>

      <div
        class="form-note"
        data-en="Already have an account? Log in instead."
        data-zh="å·²æœ‰è´¦æˆ·ï¼Ÿç›´æ¥ç™»å½•ã€‚"
      >
        Already have an account? Log in instead.
      </div>

    </form>

  </div>

  <div class="register-footer">
    <a href="/login.html" data-en="Go to Login" data-zh="å‰å¾€ç™»å½•">
      Go to Login
    </a>
  </div>

</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const form          = document.getElementById("registerForm");
  const status        = document.getElementById("formStatus");
  const passwordInput = document.getElementById("password");
  const confirmInput  = document.getElementById("confirmPassword");
  const confirmHint   = document.getElementById("confirmHint");
  /* =========================
     Email Live Validation (Register)
  ========================= */
  const emailInput = document.getElementById("email");
  const emailHint  = document.getElementById("registerEmailStatus");
  const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

  function isZh() {
    return (localStorage.getItem("superedu-lang") || "en") === "zh";
  }

  if (emailInput && emailHint) {
    emailInput.addEventListener("input", () => {
      const v = emailInput.value.trim();

      // ç©ºå€¼ï¼šä¸æç¤º
      if (!v) {
        emailHint.textContent = "";
        emailHint.style.color = "";
        return;
      }

      // ä¸åˆæ³•ï¼šæ˜¾ç¤ºåŒè¯­æç¤º
      if (!emailPattern.test(v)) {
        emailHint.textContent = isZh()
          ? "âŒ è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±æ ¼å¼"
          : "âŒ Please enter a valid email format";
        emailHint.style.color = "#dc2626";
        return;
      }

      // åˆæ³•ï¼šæ¸…ç©ºï¼ˆæˆ–è€…ä½ ä¹Ÿå¯ä»¥æ˜¾ç¤º âœ…ï¼‰
      emailHint.textContent = "";
      emailHint.style.color = "";
    });
  }

  // ===== Toast helpers (bilingual) =====
  function lang() {
    return localStorage.getItem("superedu-lang") === "zh" ? "zh" : "en";
  }
  function t(en, zh) {
    return lang() === "zh" ? zh : en;
  }
  function toast(msg, type = "info", opts = {}) {
    if (typeof window.showToast === "function") {
      window.showToast(msg, type, opts);
    } else {
      // fallback (just in case toast.js not loaded)
      alert(msg);
    }
  }

  /* =========================
     Password Rule Definition
  ========================= */
  const passwordRules = {
    length: {
      el: document.getElementById("rule-length"),
      test: pw => pw.length >= 8
    },
    letter: {
      el: document.getElementById("rule-letter"),
      test: pw => /[A-Za-z]/.test(pw)
    },
    number: {
      el: document.getElementById("rule-number"),
      test: pw => /[0-9]/.test(pw)
    }
  };

  function isValidPassword(pw) {
    return Object.values(passwordRules).every(rule => rule.test(pw));
  }

  /* =========================
     Password Live Validation
  ========================= */
  passwordInput.addEventListener("input", () => {
    const pw = passwordInput.value;

    Object.values(passwordRules).forEach(rule => {
      const ok = rule.test(pw);
      rule.el.classList.toggle("valid", ok);
      rule.el.classList.toggle("invalid", !ok);
      rule.el.querySelector(".icon").textContent = ok ? "âœ”" : "âœ–";
    });

    checkConfirmPassword();
  });

  function checkConfirmPassword() {
    const pw  = passwordInput.value;
    const cpw = confirmInput.value;

    if (!cpw) {
      confirmHint.style.display = "none";
      return;
    }

    confirmHint.style.display = "flex";
    const match = pw === cpw;

    confirmHint.classList.toggle("valid", match);

    const icon = confirmHint.querySelector(".icon");
    const text = confirmHint.querySelector(".text");

    if (match) {
      icon.textContent = "âœ” ";
      text.dataset.en = "Passwords match";
      text.dataset.zh = "ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸€è‡´";
    } else {
      icon.textContent = "âŒ ";
      text.dataset.en = "Passwords do not match";
      text.dataset.zh = "ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´";
    }

    // å¦‚æœé¡µé¢æœ‰è¯­è¨€ç³»ç»Ÿï¼Œå¯åˆ·æ–°
    if (typeof window.refreshLang === "function") window.refreshLang();
    if (typeof window.applyLanguage === "function") window.applyLanguage();
  }

  confirmInput.addEventListener("input", checkConfirmPassword);

  /* =========================
     Toggle Password Visibility
  ========================= */
  document.querySelectorAll(".toggle-password").forEach(btn => {
    btn.addEventListener("click", () => {
      const input = document.getElementById(btn.dataset.target);
      const hidden = input.type === "password";
      input.type = hidden ? "text" : "password";
      btn.textContent = hidden ? "ğŸ™ˆ" : "ğŸ‘";
    });
  });

  /* =========================
     Submit
  ========================= */
  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    // æ¸…ç©ºåŸ statusï¼ˆæˆåŠŸæ—¶æˆ‘ä»¬ä»ç„¶ç”¨å®ƒå±•ç¤º Member IDï¼‰
    status.textContent = "";
    status.className = "form-status";

    const first_name    = document.getElementById("firstName").value.trim();
    const last_name     = document.getElementById("lastName").value.trim();
    const email         = document.getElementById("email").value.trim();
    const password      = passwordInput.value;
    const confirm       = confirmInput.value;
    const referral_code = document.getElementById("referral_code")?.value.trim() || null;

    // ===== Required fields =====
    if (!first_name || !last_name || !email || !password || !confirm) {
      toast(
        t("Please complete all required fields.", "è¯·å¡«å†™æ‰€æœ‰å¿…å¡«é¡¹ã€‚"),
        "error",
        { duration: 3200 }
      );
      status.className = "form-status error";
      return;
    }

    // ===== Password rules =====
    if (!isValidPassword(password)) {
      toast(
        t(
          "Password must be at least 8 characters and include letters and numbers.",
          "å¯†ç è‡³å°‘ 8 ä½ï¼Œå¹¶ä¸”å¿…é¡»åŒ…å«å­—æ¯å’Œæ•°å­—ã€‚"
        ),
        "error",
        { duration: 3800 }
      );
      status.className = "form-status error";
      return;
    }

    // ===== Confirm match =====
    if (password !== confirm) {
      toast(
        t("Passwords do not match.", "ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´ã€‚"),
        "error",
        { duration: 3200 }
      );
      status.className = "form-status error";
      return;
    }

    // ===== Submitting toast =====
    toast(t("Creating your accountâ€¦", "æ­£åœ¨åˆ›å»ºè´¦æˆ·â€¦"), "info", { duration: 1800 });

    try {
      status.textContent = t("Creating your accountâ€¦", "æ­£åœ¨åˆ›å»ºè´¦æˆ·â€¦");
      status.className = "form-status loading";

      const res = await fetch("/api/member", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          first_name,
          last_name,
          email,
          password,
          referral_code
        })
      });

      const data = await res.json().catch(() => ({}));

      if (!res.ok) {
        const msg = data?.error || data?.message || "Registration failed.";
        toast(
          lang() === "zh"
            ? (msg === "Registration failed." ? "æ³¨å†Œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ã€‚" : msg)
            : msg,
          "error",
          { duration: 4200 }
        );

        status.textContent = lang() === "zh" ? "æ³¨å†Œå¤±è´¥ã€‚" : "Registration failed.";
        status.className = "form-status error";
        return;
      }

      // âœ… æˆåŠŸï¼šToast + åœ¨ status åŒºåŸŸæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼ˆMember IDã€é‚®ç®±éªŒè¯æç¤ºï¼‰
      toast(
        t("Account created! Please verify your email.", "åˆ›å»ºæˆåŠŸï¼è¯·å‰å¾€é‚®ç®±å®ŒæˆéªŒè¯ã€‚"),
        "success",
        { duration: 4200 }
      );

      status.innerHTML = `
        ${t("Account created successfully.", "è´¦æˆ·åˆ›å»ºæˆåŠŸã€‚")}<br>
        <strong>${t("Your Member ID:", "æ‚¨çš„ä¼šå‘˜ç¼–å·ï¼š")}</strong> ${data.member_id}<br><br>
        ğŸ“§ ${t(
          "Please check your email to verify your account before logging in.",
          "è¯·æŸ¥æ”¶é‚®ç®±å¹¶å®ŒæˆéªŒè¯åå†ç™»å½•ã€‚"
        )}
      `;
      status.className = "form-status success";

      // å¦‚æœä½ åé¢è¿˜æœ‰â€œRedirectingâ€¦â€é€»è¾‘ï¼ˆä¾‹å¦‚è·³åˆ° welcome.htmlï¼‰ï¼Œå¯ä»¥åœ¨è¿™é‡ŒåŠ ï¼š
      // setTimeout(() => window.location.href = "/welcome.html", 1200);

    } catch (err) {
      console.error(err);
      toast(
        t("Network error. Please try again.", "ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•ã€‚"),
        "error",
        { duration: 4200 }
      );
      status.textContent = t("Network error. Please try again.", "ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•ã€‚");
      status.className = "form-status error";
    }
  });

});
</script>

<!-- Footer (reuse your site footer if you have one) -->
   <!-- FOOTER -->
<footer>
  <div class="footer-inner">

    <!-- Column 1 -->
    <div class="footer-col">
      <h4>Edunova</h4>
      <a href="/apply.html" target="_blank"
         data-en="Apply for Services"
         data-zh="ç”³è¯·æœåŠ¡">
        ç”³è¯·æœåŠ¡
      </a>
      <a href="/membership.html"
         data-en="Membership"
         data-zh="ä¼šå‘˜ä¸­å¿ƒ">
        ä¼šå‘˜ä¸­å¿ƒ
      </a>
    </div>

    <!-- Column 2 -->
    <div class="footer-col">
      <h4 data-en="Education & Fund" data-zh="æ•™è‚²ä¸åŸºé‡‘">
        æ•™è‚²ä¸åŸºé‡‘
      </h4>
      <a href="/home#resources"
         data-en="Resources"
         data-zh="å­¦ä¹ èµ„æº">
        å­¦ä¹ èµ„æº
      </a>
      <a href="https://www.lsfinova.com/aid" target="_blank"
         data-en="Aid Calculator"
         data-zh="æ•™è‚²èµ„åŠ©è®¡ç®—å™¨">
        æ•™è‚²èµ„åŠ©è®¡ç®—å™¨
      </a>
    </div>

    <!-- Column 3 -->
    <div class="footer-col">
      <h4 data-en="Contact" data-zh="è”ç³»æˆ‘ä»¬">
        è”ç³»æˆ‘ä»¬
      </h4>
      <div class="muted"
           data-en="Phone: 1-916-793-0676 (Text)"
           data-zh="ç”µè¯ / çŸ­ä¿¡ï¼š1-916-793-0676">
        ç”µè¯ / çŸ­ä¿¡ï¼š1-916-793-0676
      </div>
      <div class="muted"
           data-en="WeChat: Leon_Song_PhD"
           data-zh="å¾®ä¿¡ï¼šLeon_Song_PhD">
        å¾®ä¿¡ï¼šLeon_Song_PhD
      </div>
    </div>

    <!-- Column 4 -->
    <div class="footer-col">
      <h4 data-en="Legal" data-zh="æ³•å¾‹ä¿¡æ¯">
        æ³•å¾‹ä¿¡æ¯
      </h4>
      <a href="/privacy.html"
         data-en="Privacy Policy"
         data-zh="éšç§æ”¿ç­–">
        éšç§æ”¿ç­–
      </a>
      <a href="/terms.html"
         data-en="Terms of Service"
         data-zh="æœåŠ¡æ¡æ¬¾">
        æœåŠ¡æ¡æ¬¾
      </a>
    </div>

  </div>

  <div class="footer-copy"
       data-en="Â© 2025 Edunova Foundation. All rights reserved."
       data-zh="Â© 2025 Edunova Foundation ç‰ˆæƒæ‰€æœ‰">
    Â© 2025 Edunova â€” LSFinova ç‰ˆæƒæ‰€æœ‰
  </div>
</footer>
</body>
</html>

